<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador de Datos PZEM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <style>
        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <div class="container mx-auto max-w-4xl p-4 sm:p-6 lg:p-8">
        <div class="bg-white rounded-xl shadow-lg p-6 sm:p-8">
            
            <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">
                Monitor de Energía (PZEM)
            </h1>

            <fieldset class="mb-6 border border-gray-300 p-4 rounded-lg">
                <legend class="text-xl font-semibold text-gray-700 px-2">Seleccionar Parámetros</legend>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-2">
                    
                    <div class="flex items-center p-2 hover:bg-gray-50 rounded">
                        <input id="chk1" type="checkbox" data-cols="Va,Vb,Vc" class="h-4 w-4 text-blue-600">
                        <label for="chk1" class="ml-2">1. Voltajes Fase (Va, Vb, Vc)</label>
                    </div>
                    <div class="flex items-center p-2 hover:bg-gray-50 rounded">
                        <input id="chk2" type="checkbox" data-cols="Vab,Vbc,Vca" class="h-4 w-4 text-blue-600">
                        <label for="chk2" class="ml-2">2. Voltajes Línea (Calc)</label>
                    </div>
                    <div class="flex items-center p-2 hover:bg-gray-50 rounded">
                        <input id="chk3" type="checkbox" data-cols="Ia,Ib,Ic" class="h-4 w-4 text-blue-600">
                        <label for="chk3" class="ml-2">3. Corrientes (Ia, Ib, Ic)</label>
                    </div>
                     <div class="flex items-center p-2 hover:bg-gray-50 rounded">
                        <input id="chk4" type="checkbox" data-cols="Fa,Fb,Fc" class="h-4 w-4 text-blue-600">
                        <label for="chk4" class="ml-2">4. Frecuencias (Hz)</label>
                    </div>
                    <div class="flex items-center p-2 hover:bg-gray-50 rounded">
                        <input id="chk5" type="checkbox" data-cols="FPa,FPb,FPc" class="h-4 w-4 text-blue-600">
                        <label for="chk5" class="ml-2">5. Factor de Potencia</label>
                    </div>
                    <div class="flex items-center p-2 hover:bg-gray-50 rounded">
                        <input id="chk6" type="checkbox" data-cols="Pa,Pb,Pc" class="h-4 w-4 text-blue-600">
                        <label for="chk6" class="ml-2">6. Potencia Activa (W)</label>
                    </div>
                     <div class="flex items-center p-2 hover:bg-gray-50 rounded">
                        <input id="chk7" type="checkbox" data-cols="Qa,Qb,Qc" class="h-4 w-4 text-blue-600">
                        <label for="chk7" class="ml-2">7. Potencia Reactiva (VAR)</label>
                    </div>
                     <div class="flex items-center p-2 hover:bg-gray-50 rounded">
                        <input id="chk8" type="checkbox" data-cols="Sa,Sb,Sc" class="h-4 w-4 text-blue-600">
                        <label for="chk8" class="ml-2">8. Potencia Aparente (VA)</label>
                    </div>
                     <div class="flex items-center p-2 hover:bg-gray-50 rounded">
                        <input id="chk9" type="checkbox" data-cols="Pt,Qt,St" class="h-4 w-4 text-blue-600">
                        <label for="chk9" class="ml-2">9. Totales (Pt, Qt, St)</label>
                    </div>
                    <div class="flex items-center p-2 hover:bg-gray-50 rounded">
                        <input id="chk13" type="checkbox" data-cols="E
